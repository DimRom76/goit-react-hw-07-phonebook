(this["webpackJsonpgoit-react-hw-07-phonebook"]=this["webpackJsonpgoit-react-hw-07-phonebook"]||[]).push([[0],{111:function(t,e,n){t.exports={form_input:"filter_form_input__Plt2G"}},122:function(t,e,n){},123:function(t,e,n){},243:function(t,e,n){"use strict";n.r(e);var c=n(2),a=n(0),o=n.n(a),r=n(18),i=n.n(r),s=n(19),u=(n(122),n(15)),l=n(3),b=n(4),d=n(9),j=n(10),f=(n(123),n(104)),O=n.n(f),h=n(105),m=n.n(h),p=n(33),C=n.n(p),_=n(6),v=Object(_.b)("contacts/fetchContactsRequest"),x=Object(_.b)("contacts/fetchContactsSuccess"),g=Object(_.b)("contacts/fetchContactsError"),w=Object(_.b)("contacts/addContactRequest"),y=Object(_.b)("contacts/addContactSuccess"),M=Object(_.b)("contacts/addContactError"),k=Object(_.b)("contacts/editContactRequest"),N=Object(_.b)("contacts/editContactSuccess"),S=Object(_.b)("contacts/editContactError"),L=Object(_.b)("contacts/deleteContactRequest"),E=Object(_.b)("contacts/deleteContactSuccess"),q=Object(_.b)("contacts/deleteContactError"),F=Object(_.b)("contacts/changeFilter");C.a.defaults.baseURL="http://localhost:4040";var B={fetchContacts:function(){return function(t){t(v()),C.a.get("/contacts").then((function(e){var n=e.data;return t(x(n))})).catch((function(e){return t(g(e))}))}},addContact:function(t){return function(e){e(w()),C.a.post("/contacts",t).then((function(t){var n=t.data;return e(y(n))})).catch((function(t){return e(M(t))}))}},deleteContact:function(t){return function(e){e(L()),C.a.delete("/contacts/".concat(t)).then((function(){return e(E(t))})).catch((function(t){return e(q(t))}))}},editContact:function(t){return function(e){e(k());var n=t.id;C.a.patch("/contacts/".concat(n),t).then((function(t){var n=t.data;return e(N(n))})).catch((function(t){return e(S(t))}))}}},D=n(39),R=n.n(D);var P=function(t,e){var n=e.toLowerCase();return t.filter((function(t){return-1!==t.name.toLowerCase().indexOf(n)}))},J=Object(s.b)((function(t){var e=t.contacts,n=e.items,c=e.filter;return{contacts:P(n,c)}}),(function(t){return{onDeleteContact:function(e){return t(B.deleteContact(e))}}}))((function(t){var e=t.contacts,n=t.onDeleteContact,a=t.onEditContact;return Object(c.jsx)("ul",{className:R.a.older,children:e.map((function(t){var e=t.id,o=t.name,r=t.number,i=t.description;return Object(c.jsxs)("li",{children:[Object(c.jsxs)("div",{className:"contact_container",children:[Object(c.jsxs)("p",{children:["\u0418\u043c\u044f: ",o]}),Object(c.jsxs)("p",{children:["\u041d\u043e\u043c\u0435\u0440: ",r]}),Object(c.jsxs)("p",{children:["\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435: ",i]})]}),Object(c.jsxs)("div",{className:R.a.buttom_group,children:[Object(c.jsx)("button",{className:R.a.button_list,onClick:function(){return a({idContact:e,name:o,number:r,description:i})},children:Object(c.jsx)(O.a,{})}),Object(c.jsx)("button",{className:R.a.button_list,onClick:function(){return n(e)},children:Object(c.jsx)(m.a,{})})]})]},e)}))})})),T=n(27),K=n(72),U=n(40),W=n(53),A=n(28),G=n.n(A),I=n(69),Q=(n(241),function(t){var e=t.label,n=Object(K.a)(t,["label"]),a=Object(U.c)(n),o=Object(T.a)(a,1)[0];return Object(c.jsxs)("div",{className:G.a.form_field,children:[Object(c.jsx)("label",{htmlFor:n.id||n.name,className:G.a.form_label,children:e}),Object(c.jsx)("textarea",Object(u.a)(Object(u.a)({className:"text-area"},o),n))]})}),V=function(t){var e=t.label,n=Object(K.a)(t,["label"]),a=Object(U.c)(n),o=Object(T.a)(a,2),r=o[0],i=o[1];return Object(c.jsxs)("div",{className:G.a.form_field,children:[Object(c.jsx)("label",{htmlFor:n.id||n.name,className:G.a.form_label,children:e}),Object(c.jsx)("input",Object(u.a)(Object(u.a)({className:"text-input"},r),n)),i.touched&&i.error?Object(c.jsx)("div",{className:G.a.error_message,children:i.error}):null]})};var Y=Object(s.b)((function(t){return{contacts:t.contacts.items}}),(function(t){return{onSubmitNew:function(e){return t(B.addContact(e))},onChangeContact:function(e){return t(B.editContact(e))}}}))((function(t){var e=t.onSave,n=t.onSubmitNew,a=t.onChangeContact,o=t.contacts,r=t.editContact,i=W.a().shape({name:W.b().min(2,"Too Short!").max(25,"Too Long!").required("Requerid"),number:W.b().length(9,"Wrong length!").required("Requerid")}),s=r.idContact,l=r.name,b=r.number,d=r.description;return void 0===s&&(l="",b="",d=""),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(U.b,{initialValues:{name:l,number:b,description:d},validationSchema:i,onSubmit:function(t,c){var r=c.setSubmitting,i=c.resetForm;if(r(!1),void 0===s){if(o.find((function(e){var n=e.name,c=e.number;return n.toLowerCase()===t.name.toLowerCase()||c===t.number})))return void I.b.warn("\u0412\u0432\u0435\u0434\u0435\u043d\u043d\u043e\u0435 \u0438\u043c\u044f \u0438\u043b\u0438 \u043d\u043e\u043c\u0435\u0440 \u0443\u0436\u0435 \u0435\u0441\u0442\u044c \u0432 \u0441\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a\u0435!");n(t)}else a(Object(u.a)(Object(u.a)({},t),{},{id:s}));e(),i()},children:function(t){var e=t.isSubmitting;return Object(c.jsxs)(U.a,{className:G.a.form,children:[Object(c.jsx)(V,{label:"\u0418\u043c\u044f \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0430",name:"name",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f..."}),Object(c.jsx)(V,{label:"\u041d\u043e\u043c\u0435\u0440 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0430",name:"number",type:"tel",pattern:"[0-9]{3}-[0-9]{2}-[0-9]{2}",placeholder:"555-55-55"}),Object(c.jsx)(Q,{label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",name:"description",rows:"6",placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0430..."}),Object(c.jsx)("button",{type:"submit",disabled:e,className:G.a.form_field,children:void 0===s?"\u041d\u043e\u0432\u044b\u0439 \u043a\u043e\u043d\u0442\u0430\u043a\u0442":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})}}),Object(c.jsx)(I.a,{})]})})),Z=n(111),z=n.n(Z);var H=Object(s.b)((function(t){return{value:t.contacts.filter}}),(function(t){return{onChange:function(e){return t(F(e.target.value))}}}))((function(t){var e=t.value,n=t.onChange;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h3",{children:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0438\u043c\u0435\u043d\u0438"}),Object(c.jsx)("input",{className:z.a.form_input,type:"text",name:"filter",value:e,onChange:n})]})})),X=n(112),$=n.n(X),tt=n(70),et=n.n(tt);var nt,ct,at=function(t){var e=t.onClick;return Object(c.jsxs)("header",{className:et.a.Mainbar,children:[Object(c.jsx)(H,{}),Object(c.jsx)("button",{className:et.a.addBtn,type:"button",onClick:e,children:Object(c.jsx)($.a,{})})]})},ot=n(71),rt=n.n(ot),it=document.querySelector("#modal-root"),st=function(t){Object(d.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(l.a)(this,n);for(var c=arguments.length,a=new Array(c),o=0;o<c;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).handleKeyDown=function(e){var n;"Escape"===e.code&&((null===(n=t.props)||void 0===n?void 0:n.onClose)&&t.props.onClose())},t.handleBackdropClick=function(e){var n;e.currentTarget===e.target&&((null===(n=t.props)||void 0===n?void 0:n.onClose)&&t.props.onClose())},t}return Object(b.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(r.createPortal)(Object(c.jsx)("div",{className:rt.a.Modal__backdrop,onClick:this.handleBackdropClick,children:Object(c.jsx)("div",{className:rt.a.Modal__content,children:this.props.children})}),it)}}]),n}(a.Component),ut=function(t){Object(d.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(l.a)(this,n);for(var c=arguments.length,a=new Array(c),o=0;o<c;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).state={showModal:!1,editContact:{}},t.toggleModal=function(){t.setState((function(t){return Object(u.a)(Object(u.a)({},t),{},{showModal:!t.showModal,editContact:{}})}))},t.setEditContact=function(e){t.setState((function(t){return Object(u.a)(Object(u.a)({},t),{},{showModal:!t.showModal,editContact:e})}))},t}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchContacts()}},{key:"render",value:function(){var t=this.state,e=t.showModal,n=t.editContact;return Object(c.jsxs)("div",{className:"container",children:[this.props.isContactsLoading&&Object(c.jsx)(st,{children:Object(c.jsx)("h1",{children:"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445..."})}),Object(c.jsx)(at,{onClick:this.toggleModal}),Object(c.jsx)("h1",{children:"Phonebook"}),Object(c.jsx)(J,{onEditContact:this.setEditContact}),e&&Object(c.jsx)(st,{onClose:this.toggleModal,children:Object(c.jsx)(Y,{onSave:this.toggleModal,editContact:n})})]})}}]),n}(a.Component),lt=Object(s.b)((function(t){return{isContactsLoading:t.contacts.loading}}),(function(t){return{fetchContacts:function(){return t(B.fetchContacts())}}}))(ut),bt=n(8),dt=n(14),jt=n(13),ft=Object(_.c)([],(nt={},Object(bt.a)(nt,x,(function(t,e){return e.payload})),Object(bt.a)(nt,y,(function(t,e){var n=e.payload;return[].concat(Object(dt.a)(t),[n])})),Object(bt.a)(nt,E,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),Object(bt.a)(nt,N,(function(t,e){var n=e.payload;return t.map((function(t){return t.id===n.id?n:t}))})),nt)),Ot=Object(_.c)("",Object(bt.a)({},F,(function(t,e){return e.payload}))),ht=Object(_.c)(!1,(ct={},Object(bt.a)(ct,v,(function(){return!0})),Object(bt.a)(ct,x,(function(){return!1})),Object(bt.a)(ct,g,(function(){return!1})),Object(bt.a)(ct,w,(function(){return!0})),Object(bt.a)(ct,y,(function(){return!1})),Object(bt.a)(ct,M,(function(){return!1})),Object(bt.a)(ct,k,(function(){return!0})),Object(bt.a)(ct,N,(function(){return!1})),Object(bt.a)(ct,S,(function(){return!1})),Object(bt.a)(ct,L,(function(){return!0})),Object(bt.a)(ct,E,(function(){return!1})),Object(bt.a)(ct,q,(function(){return!1})),ct)),mt=Object(_.c)(null,{}),pt=Object(jt.c)({items:ft,filter:Ot,loading:ht,error:mt}),Ct=Object(_.a)({reducer:{contacts:pt},devTools:!1});i.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(s.a,{store:Ct,children:Object(c.jsx)(lt,{})})}),document.getElementById("root"))},28:function(t,e,n){t.exports={form:"ContactForm_form__1Pec4",form_field:"ContactForm_form_field__3YOuG",form_label:"ContactForm_form_label__rt9Qh",error_message:"ContactForm_error_message__3J2-C"}},39:function(t,e,n){t.exports={button_list:"ContactList_button_list__3pjuS",buttom_group:"ContactList_buttom_group__3qcU0",older:"ContactList_older__qeZsS"}},70:function(t,e,n){t.exports={Mainbar:"Mainbar_Mainbar__3gSPJ",addBtn:"Mainbar_addBtn__1reWO"}},71:function(t,e,n){t.exports={Modal__backdrop:"Modal_Modal__backdrop__7_Bb1",Modal__content:"Modal_Modal__content__3pysr"}}},[[243,1,2]]]);
//# sourceMappingURL=main.dc0cde6a.chunk.js.map